<div class="back-button" (click)="goBack()">‚Üê Back to Employees</div>

<h2>Add New Employee</h2>
<p class="form-subtext">Please fill the form below:</p>

<div class="employee-add-card">
  <div class="profile-section">
    <img *ngIf="employeePhoto" [src]="employeePhoto" alt="Profile" class="profile-pic" />
    <label for="profilePicUpload" class="upload-btn">Upload Picture</label>
    <input id="profilePicUpload" type="file" (change)="onFileSelected($event)" accept="image/*" hidden />
  </div>

  <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>First Name:</label>
      <input formControlName="first_name" type="text"
             [ngClass]="{ 'invalid-field': formSubmitted && employeeForm.get('first_name')?.invalid }" />
      <small *ngIf="formSubmitted && employeeForm.get('first_name')?.hasError('required')">
        First name is required.
      </small>
      <small *ngIf="formSubmitted && employeeForm.get('first_name')?.hasError('lettersOnly')">
        Only letters are allowed.
      </small>
    </div>
  
    <div class="form-group">
      <label>Last Name:</label>
      <input formControlName="last_name" type="text"
             [ngClass]="{ 'invalid-field': formSubmitted && employeeForm.get('last_name')?.invalid }" />
      <small *ngIf="formSubmitted && employeeForm.get('last_name')?.hasError('required')">
        Last name is required.
      </small>
      <small *ngIf="formSubmitted && employeeForm.get('last_name')?.hasError('lettersOnly')">
        Only letters are allowed.
      </small>
    </div>
  
    <div class="form-group">
      <label>Email:</label>
      <input formControlName="email" type="email"
             [ngClass]="{ 'invalid-field': formSubmitted && employeeForm.get('email')?.invalid }" />
      <small *ngIf="formSubmitted && employeeForm.get('email')?.hasError('required')">
        Email is required.
      </small>
      <small *ngIf="formSubmitted && employeeForm.get('email')?.hasError('email')">
        Please enter a valid email.
      </small>
    </div>
  
    <div class="form-group">
      <label>Gender:</label>
      <select formControlName="gender"
              [ngClass]="{ 'invalid-field': formSubmitted && employeeForm.get('gender')?.invalid }">
        <option value="" disabled selected>Select Gender</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>
      <small *ngIf="formSubmitted && employeeForm.get('gender')?.hasError('required')">
        Gender is required.
      </small>
    </div>

    <div class="form-group">
        <label>Salary (must be over 1,000):</label>
        <input 
          formControlName="salary" 
          type="number"
          [ngClass]="{ 'invalid-field': formSubmitted && employeeForm.get('salary')?.invalid }" 
        />
      
        <small *ngIf="formSubmitted && employeeForm.get('salary')?.hasError('required')">
          Salary is required.
        </small>
      
        <small *ngIf="formSubmitted && employeeForm.get('salary')?.hasError('positiveNumber')">
          Salary must be at least 1000.
        </small>
      </div>
  
    <div class="form-group">
      <label>Date of Joining:</label>
      <input formControlName="date_of_joining" type="date"
             [ngClass]="{ 'invalid-field': formSubmitted && employeeForm.get('date_of_joining')?.invalid }" />
      <small *ngIf="formSubmitted && employeeForm.get('date_of_joining')?.hasError('required')">
        Date of joining is required.
      </small>
      <small *ngIf="formSubmitted && employeeForm.get('date_of_joining')?.hasError('futureDate')">
        Date cannot be in the future.
      </small>
    </div>
  
    <div class="form-group">
      <label>Department:</label>
      <select formControlName="department"
              [ngClass]="{ 'invalid-field': formSubmitted && employeeForm.get('department')?.invalid }">
        <option value="" disabled selected>Select Department</option>
        <option value="Human Resources">Human Resources</option>
        <option value="Finance">Finance</option>
        <option value="Marketing">Marketing</option>
        <option value="Sales">Sales</option>
        <option value="Information Technology">Information Technology (IT)</option>
        <option value="Customer Service">Customer Service</option>
        <option value="Operations">Operations</option>
        <option value="Legal">Legal</option>
      </select>
      <small *ngIf="formSubmitted && employeeForm.get('department')?.hasError('required')">
        Department is required.
      </small>
    </div>
  
    <div class="form-group">
      <label>Position:</label>
      <select formControlName="designation"
              [ngClass]="{ 'invalid-field': formSubmitted && employeeForm.get('designation')?.invalid }">
        <option value="" disabled selected>Select Position</option>
        <option value="HR Manager">HR Manager</option>
        <option value="Financial Analyst">Financial Analyst</option>
        <option value="Marketing Coordinator">Marketing Coordinator</option>
        <option value="Sales Representative">Sales Representative</option>
        <option value="IT Support Specialist">IT Support Specialist</option>
        <option value="Customer Service Representative">Customer Service Representative</option>
        <option value="Research Scientist">Research Scientist</option>
        <option value="Operations Manager">Operations Manager</option>
        <option value="Legal Advisor">Legal Advisor</option>
      </select>
      <small *ngIf="formSubmitted && employeeForm.get('designation')?.hasError('required')">
        Position is required.
      </small>
    </div>
  
    <button type="submit" class="submit-btn">Add Employee</button>
    <button type="button" class="cancel-btn" (click)="onCancel()">Cancel</button>
  
    <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>
  </form>
</div>
